(this["webpackJsonpelectricity-carbon-usage"]=this["webpackJsonpelectricity-carbon-usage"]||[]).push([[0],{137:function(e,t,a){},138:function(e,t,a){},141:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},267:function(e,t,a){},268:function(e,t,a){},269:function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),i=a(10),o=a.n(i),s=(a(137),a(40)),l=a(310),d=a(311),u=(a(138),{data:function(){for(var e=[],t=new Date,a=0;a<=6;a++)e.push({date:new Date(t.getTime()+864e5*a),location:"de",usage:0});return e}(),carbonCalculationResults:[],carbonCalculationLoading:!1,carbonApiKey:""}),b=r.a.createContext({state:u,dispatch:function(){}}),j=a(13),h=a(11),p=function(e,t){switch(t.type){case n.UpdateUserData:var a=e.data,c=a.findIndex((function(e){return e.date===t.payload.date}));return a[c]=Object(h.a)(Object(h.a)({},a[c]),{},Object(j.a)({},t.payload.field,t.payload.value)),Object(h.a)(Object(h.a)({},e),{},{data:a});case n.UpdateCarbonApiKey:return Object(h.a)(Object(h.a)({},e),{},{carbonApiKey:t.payload.key});case n.CalculateWeeklyData:return Object(h.a)(Object(h.a)({},e),{},{carbonCalculationLoading:!0});case n.CalculateDataSucceed:var r=e.carbonCalculationResults,i=r.findIndex((function(e){return e.date===t.payload.date}));return i>=0?r[i]=t.payload:r.push(t.payload),Object(h.a)(Object(h.a)({},e),{},{carbonCalculationLoading:!1});case n.CalculateDataFailed:return Object(h.a)(Object(h.a)({},e),{},{carbonCalculationLoading:!1});default:return e}},O=a(3);!function(e){e[e.UpdateUserData=0]="UpdateUserData",e[e.UpdateCarbonApiKey=1]="UpdateCarbonApiKey",e[e.CalculateWeeklyData=2]="CalculateWeeklyData",e[e.CalculateDataSucceed=3]="CalculateDataSucceed",e[e.CalculateDataFailed=4]="CalculateDataFailed"}(n||(n={}));var m=a(85),x=a.n(m),f=a(111),g=a(301),y=(a(141),function(){return Object(O.jsx)("header",{className:"app-header-component",children:Object(O.jsx)("div",{className:"content",children:Object(O.jsx)(g.a,{gutterBottom:!0,variant:"h3",component:"h1",children:"Carbon Usage Calculator"})})})}),C=a(116),v=a.n(C),D=a(304),S=a(305),w=a(306),L=(a(160),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Dec"]),F=["Sun","Mon","Tue","Wed","Thu","Fr","Sat"],K=function(){var e=Object(c.useContext)(b),t=e.state,a=e.dispatch,r=function(e,t,c){a({type:n.UpdateUserData,payload:{date:e,field:t,value:c}})};return Object(O.jsxs)("div",{className:"date-picker-component content",children:[Object(O.jsx)(g.a,{gutterBottom:!0,variant:"h4",component:"h2",children:"Fill Your Electricity Usage Data"}),Object(O.jsx)("div",{className:"slider-container",children:Object(O.jsx)(v.a,{infinite:!1,slidesToShow:1,dots:!0,customPaging:function(e){return Object(O.jsx)("button",{className:"".concat(t.data[e].location&&t.data[e].usage?"filled":"unfilled"),children:e})},children:t.data.map((function(e,t){return Object(O.jsx)("div",{className:"card-container",children:Object(O.jsx)(D.a,{variant:"outlined",children:Object(O.jsxs)(S.a,{children:[Object(O.jsxs)(g.a,{variant:"h5",component:"h3",children:[(n=e.date.getMonth(),n<12&&n>=0?L[n]:"")," ",e.date.getDate()]}),Object(O.jsx)(g.a,{gutterBottom:!0,variant:"h5",component:"h3",children:(a=e.date.getDay(),a<7&&a>=0?F[a]:"")}),Object(O.jsx)(w.a,{style:{margin:"20px 0"}}),Object(O.jsx)(B,Object(h.a)(Object(h.a)({},e),{},{handleFormChange:r}))]})})},t);var a,n}))})})]})},T=a(307),U=a(276),A=a(277),k=a(275),N=a(274),E=a(272),I=["US","CA","AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","GU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB"].sort(),B=function(e){var t=e.location,a=e.usage,n=e.date,c=e.handleFormChange;return Object(O.jsx)("form",{children:Object(O.jsxs)(T.a,{container:!0,children:[Object(O.jsx)(T.a,{item:!0,xs:4,spacing:1,children:Object(O.jsxs)(U.a,{children:[Object(O.jsx)(A.a,{htmlFor:"location",children:"Location"}),Object(O.jsxs)(k.a,{"aria-describedby":"user's location",native:!0,value:t,onChange:function(e){var t=e.target;return c(n,"location",t.value)},children:[Object(O.jsx)("option",{"aria-label":"None",value:""}),I.map((function(e,t){return Object(O.jsx)("option",{value:e.toLowerCase(),children:e},t)}))]}),Object(O.jsx)(N.a,{id:"Your Location",children:"Your Current Location"})]})}),Object(O.jsx)(T.a,{item:!0,xs:8,children:Object(O.jsxs)(U.a,{children:[Object(O.jsx)(A.a,{htmlFor:"location",children:"Electricity Usage"}),Object(O.jsx)(E.a,{"aria-describedby":"user's location",type:"number",value:a||"",onChange:function(e){var t=e.target;c(n,"usage",parseInt(t.value,10)>=0?Math.round(parseInt(t.value,10)):0)}}),Object(O.jsx)(N.a,{id:"Your Location",children:"Calcualted in MWH"})]})})]})})},R=a(313),M=a(309),P=(a(161),function(){var e=Object(c.useContext)(b),t=e.state,a=e.dispatch;return Object(O.jsxs)("div",{className:"api-key-input-component content",children:[Object(O.jsx)(g.a,{gutterBottom:!0,variant:"h4",component:"h2",children:"Insert Your Api Key here"}),Object(O.jsx)(R.a,{className:"info-text",children:Object(O.jsxs)(g.a,{component:"span",children:["The API Key can be acquired at ",Object(O.jsx)("a",{rel:"noreferrer",target:"_blank",href:"https://www.carboninterface.com/",children:"CarbonInterface"})]})}),Object(O.jsx)(U.a,{children:Object(O.jsx)(M.a,{id:"standard-basic",label:"Api Key",value:t.carbonApiKey,onChange:function(e){var t=e.target;a({type:n.UpdateCarbonApiKey,payload:{key:t.value}})}})})]})}),J=a(70),Y=(a(267),function(){J.b.defaults.color="#95d5b2";var e=Object(c.useContext)(b).state,t=e.carbonCalculationResults.sort((function(e,t){return e.date.getTime()-t.date.getTime()})),a={labels:t.map((function(e){return e.date.toDateString()})),datasets:[{data:t.map((function(e){return e.carbonKg})),label:"Carbon Emission in Kg",backgroundColor:"#95d5b2"}]};return Object(O.jsx)("div",{className:"carbon-usage-component content",children:Object(O.jsxs)(T.a,{container:!0,spacing:3,children:[Object(O.jsx)(T.a,{item:!0,xs:12,children:Object(O.jsx)(g.a,{variant:"h4",component:"h2",gutterBottom:!0,children:"You Carbon Emission Results!"})}),!e.carbonCalculationLoading&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(T.a,{item:!0,xs:12,md:6,children:Object(O.jsx)(J.a,{data:a,type:"bar"})}),Object(O.jsxs)(T.a,{item:!0,xs:12,md:6,children:[Object(O.jsx)(J.c,{style:{marginBottom:"10px"},data:a,type:"pie"}),Object(O.jsxs)(g.a,{align:"center",children:["Total: ",t.map((function(e){return e.carbonKg})).reduce((function(e,t){return e+t}))," kg"]})]})]})]})})}),_=a(316),z=a(314),W=(a(268),function(e){var t=e.data,a=Object(c.useContext)(b),r=a.state,i=a.dispatch,o=!r.carbonApiKey||t.some((function(e){return!e.location||!e.usage}));return Object(O.jsx)("div",{className:"usage-calculate-component content",children:Object(O.jsx)(_.a,{title:o?"Not all dates are filled, please fill missing information":"",arrow:!0,children:Object(O.jsx)("span",{children:Object(O.jsx)(z.a,{variant:"contained",color:"primary",disabled:o,onClick:function(){return i(function(e,t,a){return t.forEach(function(){var t=Object(f.a)(x.a.mark((function t(c){return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(r=c.usage,i=c.location,o=a,fetch("https://www.carboninterface.com/api/v1/estimates",{method:"POST",body:JSON.stringify({type:"electricity",electricity_unit:"mwh",electricity_value:r,country:i}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}}).then((function(e){return e.json()}))).then((function(t){if(t.message)throw new Error(t.message);e({type:n.CalculateDataSucceed,payload:{date:c.date,carbonG:t.data.attributes.carbon_g,carbonKg:t.data.attributes.carbon_kg,carbonLb:t.data.attributes.carbon_lb,carbonMt:t.data.attributes.carbon_mt}})})).catch((function(t){console.log(t),e({type:n.CalculateDataFailed})}));case 2:case"end":return t.stop()}var r,i,o}),t)})));return function(e){return t.apply(this,arguments)}}()),{type:n.CalculateWeeklyData}}(i,r.data,"K0DC9ahVchblZpgzT7Jg"))},children:"Calculate"})})})})}),G=a(120);var H=function(){var e=Object(c.useReducer)(p,u),t=Object(s.a)(e,2),a=t[0],n=t[1];return Object(O.jsx)(b.Provider,{value:{state:a,dispatch:n},children:Object(O.jsx)(l.a,{theme:Object(G.a)({palette:{primary:{main:"#40916c"},secondary:{main:"#95d5b2"}},typography:{h3:{fontSize:"1.2rem","@media (min-width: 600px)":{fontSize:"2.4rem"}},h4:{fontSize:"1.2rem","@media (min-width: 600px)":{fontSize:"2.4rem"}}}}),children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)(y,{}),Object(O.jsx)(P,{}),Object(O.jsx)(K,{}),Object(O.jsx)(W,{data:a.data}),a.carbonCalculationLoading&&Object(O.jsx)("div",{className:"content",children:Object(O.jsx)(d.a,{})}),!!a.carbonCalculationResults.length&&Object(O.jsx)(Y,{})]})})})},V=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,318)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),c(e),r(e),i(e)}))};o.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(H,{})}),document.getElementById("root")),V()}},[[269,1,2]]]);
//# sourceMappingURL=main.113b964c.chunk.js.map